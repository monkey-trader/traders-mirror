<?xml version="1.0" encoding="UTF-8" ?>
<testsuites name="vitest tests" tests="45" failures="0" errors="0" time="4.750601042">
    <testsuite name="src/presentation/settings/Settings.test.tsx" timestamp="2025-12-28T18:23:02.285Z" hostname="macbookair.home" tests="1" failures="0" errors="0" skipped="0" time="0.15674225">
        <testcase classname="src/presentation/settings/Settings.test.tsx" name="Settings Switch and TradeJournal debug banner &gt; toggles debug UI in localStorage and TradeJournal shows debug banner" time="0.154779333">
            <system-out>
[LocalStorageRepo] flushed [33m1[39m trades to localStorage
[LocalStorageRepo] initialized with defaults

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/presentation/analysis/Analysis.integration.test.tsx" timestamp="2025-12-28T18:23:02.286Z" hostname="macbookair.home" tests="1" failures="0" errors="0" skipped="0" time="0.22377175">
        <testcase classname="src/presentation/analysis/Analysis.integration.test.tsx" name="Analysis -&gt; prefill new trade &gt; prefills the New Trade form when creating from analysis" time="0.222629917">
        </testcase>
    </testsuite>
    <testsuite name="src/presentation/analysis/errorMapper.test.ts" timestamp="2025-12-28T18:23:02.286Z" hostname="macbookair.home" tests="2" failures="0" errors="0" skipped="0" time="0.002295167">
        <testcase classname="src/presentation/analysis/errorMapper.test.ts" name="analysis errorMapper &gt; maps validation-like error" time="0.001127542">
        </testcase>
        <testcase classname="src/presentation/analysis/errorMapper.test.ts" name="analysis errorMapper &gt; maps unknown error to generic message" time="0.000123167">
        </testcase>
    </testsuite>
    <testsuite name="src/presentation/analysis/validation.test.ts" timestamp="2025-12-28T18:23:02.286Z" hostname="macbookair.home" tests="3" failures="0" errors="0" skipped="0" time="0.002533375">
        <testcase classname="src/presentation/analysis/validation.test.ts" name="analysis validation &gt; returns error for missing symbol" time="0.001023959">
        </testcase>
        <testcase classname="src/presentation/analysis/validation.test.ts" name="analysis validation &gt; returns error for invalid price" time="0.000260958">
        </testcase>
        <testcase classname="src/presentation/analysis/validation.test.ts" name="analysis validation &gt; passes for valid suggestion" time="0.000231084">
        </testcase>
    </testsuite>
    <testsuite name="src/presentation/trade/TradeJournal.compact.test.tsx" timestamp="2025-12-28T18:23:02.286Z" hostname="macbookair.home" tests="1" failures="0" errors="0" skipped="0" time="1.288517542">
        <testcase classname="src/presentation/trade/TradeJournal.compact.test.tsx" name="TradeJournal compact editor toggle &gt; shows compact summary and toggles editor when Show details clicked" time="1.286604625">
        </testcase>
    </testsuite>
    <testsuite name="src/presentation/trade/TradeJournal.entryDate.test.tsx" timestamp="2025-12-28T18:23:02.286Z" hostname="macbookair.home" tests="1" failures="0" errors="0" skipped="0" time="0.106200833">
        <testcase classname="src/presentation/trade/TradeJournal.entryDate.test.tsx" name="TradeJournal entryDate &gt; prefills entryDate with current datetime (within 2 minutes)" time="0.105115834">
            <system-err>
Warning: An update to TradeJournal inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() =&gt; {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you&apos;re testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TradeJournal (/Users/morpheus/git/github/monkey-trader/traders-mirror/src/presentation/trade/TradeJournal.tsx:34:25)

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="src/presentation/trade/TradeJournal.integration.test.tsx" timestamp="2025-12-28T18:23:02.287Z" hostname="macbookair.home" tests="6" failures="0" errors="0" skipped="0" time="2.597060375">
        <testcase classname="src/presentation/trade/TradeJournal.integration.test.tsx" name="TradeJournal Integration &gt; allows creating, editing, filtering, and deleting trades (desktop)" time="1.898388">
            <system-out>
[TradeJournal] handleAdd start {
  form: {
    symbol: [32m&apos;EURUSD-INT&apos;[39m,
    entryDate: [32m&apos;2025-12-28T19:22&apos;[39m,
    size: [33m12000[39m,
    price: [33m1.118[39m,
    side: [32m&apos;LONG&apos;[39m,
    status: [32m&apos;OPEN&apos;[39m,
    market: [32m&apos;Crypto&apos;[39m,
    notes: [32m&apos;Breakdown&apos;[39m,
    margin: [33m110[39m,
    leverage: [33m20[39m,
    sl: [33m1.112[39m,
    tp1: [33m1.112[39m,
    tp2: [33m1.108[39m,
    tp3: [33m1.102[39m,
    tp4: [33m1.098[39m
  }
}
[TradeJournal] persisting trade to repo bb9266c6-c7c3-473f-b38d-92b437b9cea4

[TradeJournal] persisted trade to repo bb9266c6-c7c3-473f-b38d-92b437b9cea4

[TradeJournal] reloaded positions from repo [33m15[39m

            </system-out>
            <system-err>
Save failed: trade not found bb9266c6-c7c3-473f-b38d-92b437b9cea4

            </system-err>
        </testcase>
        <testcase classname="src/presentation/trade/TradeJournal.integration.test.tsx" name="TradeJournal Integration &gt; renders and interacts correctly in compactView (mobile/forceCompact)" time="0.322383417">
            <system-out>
[TradeJournal] handleAdd start {
  form: {
    symbol: [32m&apos;GBPUSD&apos;[39m,
    entryDate: [32m&apos;2025-12-28T19:23&apos;[39m,
    size: [33m10000[39m,
    price: [33m1.25[39m,
    side: [32m&apos;LONG&apos;[39m,
    status: [32m&apos;OPEN&apos;[39m,
    market: [32m&apos;Crypto&apos;[39m,
    notes: [32m&apos;&apos;[39m,
    margin: [33m100[39m,
    leverage: [33m10[39m,
    sl: [33m1.2[39m
  }
}
[TradeJournal] persisting trade to repo 42ac9c28-010b-4ff0-bd66-1c9da0f89fcf

[TradeJournal] persisted trade to repo 42ac9c28-010b-4ff0-bd66-1c9da0f89fcf

[TradeJournal] reloaded positions from repo [33m15[39m

            </system-out>
        </testcase>
        <testcase classname="src/presentation/trade/TradeJournal.integration.test.tsx" name="TradeJournal Integration &gt; shows validation errors for missing required fields" time="0.0551115">
            <system-out>
[TradeJournal] handleAdd start {
  form: {
    symbol: [32m&apos;&apos;[39m,
    entryDate: [32m&apos;2025-12-28T19:23&apos;[39m,
    size: [90mundefined[39m,
    price: [90mundefined[39m,
    side: [32m&apos;LONG&apos;[39m,
    status: [32m&apos;OPEN&apos;[39m,
    market: [32m&apos;Crypto&apos;[39m,
    notes: [32m&apos;&apos;[39m
  }
}
[TradeJournal] validation failed {
  symbol: [32m&apos;Symbol ist erforderlich&apos;[39m,
  price: [32m&apos;Entry Price ist erforderlich&apos;[39m,
  size: [32m&apos;Größe muss positiv sein&apos;[39m,
  sl: [32m&apos;Stop Loss (SL) ist erforderlich&apos;[39m,
  margin: [32m&apos;Margin ist erforderlich&apos;[39m,
  leverage: [32m&apos;Leverage ist erforderlich&apos;[39m
}

            </system-out>
        </testcase>
        <testcase classname="src/presentation/trade/TradeJournal.integration.test.tsx" name="TradeJournal Integration &gt; resets the form when Reset is clicked" time="0.045364458">
            <system-out>
[TradeJournal] handleAdd start {
  form: {
    symbol: [32m&apos;TEST&apos;[39m,
    entryDate: [32m&apos;2025-12-28T19:23&apos;[39m,
    size: [90mundefined[39m,
    price: [90mundefined[39m,
    side: [32m&apos;LONG&apos;[39m,
    status: [32m&apos;OPEN&apos;[39m,
    market: [32m&apos;Crypto&apos;[39m,
    notes: [32m&apos;&apos;[39m
  }
}
[TradeJournal] validation failed {
  price: [32m&apos;Entry Price ist erforderlich&apos;[39m,
  size: [32m&apos;Größe muss positiv sein&apos;[39m,
  sl: [32m&apos;Stop Loss (SL) ist erforderlich&apos;[39m,
  margin: [32m&apos;Margin ist erforderlich&apos;[39m,
  leverage: [32m&apos;Leverage ist erforderlich&apos;[39m
}

            </system-out>
            <system-err>
Warning: An update to TradeJournal inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() =&gt; {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you&apos;re testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TradeJournal (/Users/morpheus/git/github/monkey-trader/traders-mirror/src/presentation/trade/TradeJournal.tsx:34:25)

            </system-err>
        </testcase>
        <testcase classname="src/presentation/trade/TradeJournal.integration.test.tsx" name="TradeJournal Integration &gt; shows undo after delete and restores the trade" time="0.21613725">
            <system-out>
[TradeJournal] handleAdd start {
  form: {
    symbol: [32m&apos;UNDOUSD&apos;[39m,
    entryDate: [32m&apos;2025-12-28T19:23&apos;[39m,
    size: [33m1000[39m,
    price: [33m1[39m,
    side: [32m&apos;LONG&apos;[39m,
    status: [32m&apos;OPEN&apos;[39m,
    market: [32m&apos;Crypto&apos;[39m,
    notes: [32m&apos;&apos;[39m,
    margin: [33m10[39m,
    leverage: [33m1[39m,
    sl: [33m0.9[39m
  }
}
[TradeJournal] persisting trade to repo c198698c-b745-4030-b338-032cd59bea01

[TradeJournal] persisted trade to repo c198698c-b745-4030-b338-032cd59bea01

[TradeJournal] reloaded positions from repo [33m15[39m

            </system-out>
        </testcase>
        <testcase classname="src/presentation/trade/TradeJournal.integration.test.tsx" name="TradeJournal Integration &gt; prefills new trade form from analysis tab" time="0.057454458">
        </testcase>
    </testsuite>
    <testsuite name="src/presentation/trade/errorMapper.test.ts" timestamp="2025-12-28T18:23:02.288Z" hostname="macbookair.home" tests="2" failures="0" errors="0" skipped="0" time="0.047892875">
        <testcase classname="src/presentation/trade/errorMapper.test.ts" name="mapTradeError &gt; maps field error objects" time="0.002435">
        </testcase>
        <testcase classname="src/presentation/trade/errorMapper.test.ts" name="mapTradeError &gt; returns default message for unknown errors" time="0.000118458">
        </testcase>
    </testsuite>
    <testsuite name="src/presentation/trade/validation.test.ts" timestamp="2025-12-28T18:23:02.288Z" hostname="macbookair.home" tests="4" failures="0" errors="0" skipped="0" time="0.00344025">
        <testcase classname="src/presentation/trade/validation.test.ts" name="validateNewTrade &gt; returns no errors for a valid input" time="0.001761292">
        </testcase>
        <testcase classname="src/presentation/trade/validation.test.ts" name="validateNewTrade &gt; returns market error when market empty" time="0.000134541">
        </testcase>
        <testcase classname="src/presentation/trade/validation.test.ts" name="validateNewTrade &gt; returns size and price errors for invalid numbers" time="0.000093833">
        </testcase>
        <testcase classname="src/presentation/trade/validation.test.ts" name="validateNewTrade &gt; returns errors when sl/margin/leverage missing" time="0.000101792">
        </testcase>
    </testsuite>
    <testsuite name="src/application/trade/services/TradeService.test.ts" timestamp="2025-12-28T18:23:02.288Z" hostname="macbookair.home" tests="2" failures="0" errors="0" skipped="0" time="0.004944708">
        <testcase classname="src/application/trade/services/TradeService.test.ts" name="TradeService &gt; should add and list trades" time="0.002885167">
        </testcase>
        <testcase classname="src/application/trade/services/TradeService.test.ts" name="TradeService &gt; should update a trade" time="0.000358542">
        </testcase>
    </testsuite>
    <testsuite name="src/infrastructure/trade/repositories/LocalStorageTradeRepository.test.ts" timestamp="2025-12-28T18:23:02.288Z" hostname="macbookair.home" tests="2" failures="0" errors="0" skipped="0" time="0.003670292">
        <testcase classname="src/infrastructure/trade/repositories/LocalStorageTradeRepository.test.ts" name="LocalStorageTradeRepository &gt; saves and retrieves trades" time="0.002440041">
            <system-out>
[LocalStorageRepo] flushed [33m1[39m trades to localStorage
[LocalStorageRepo] initialized with defaults
[LocalStorageRepo] save u1
[LocalStorageRepo] flushed [33m2[39m trades to localStorage

            </system-out>
        </testcase>
        <testcase classname="src/infrastructure/trade/repositories/LocalStorageTradeRepository.test.ts" name="LocalStorageTradeRepository &gt; updates existing trade" time="0.000425292">
            <system-out>
[LocalStorageRepo] flushed [33m1[39m trades to localStorage
[LocalStorageRepo] initialized with defaults
[LocalStorageRepo] save u2
[LocalStorageRepo] flushed [33m2[39m trades to localStorage

[LocalStorageRepo] update u2
[LocalStorageRepo] flushed [33m2[39m trades to localStorage

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/domain/trade/entities/Trade.test.ts" timestamp="2025-12-28T18:23:02.288Z" hostname="macbookair.home" tests="5" failures="0" errors="0" skipped="0" time="0.005873333">
        <testcase classname="src/domain/trade/entities/Trade.test.ts" name="TradeFactory &gt; should create a valid Trade" time="0.002577625">
        </testcase>
        <testcase classname="src/domain/trade/entities/Trade.test.ts" name="TradeFactory &gt; should throw on invalid symbol" time="0.000291333">
        </testcase>
        <testcase classname="src/domain/trade/entities/Trade.test.ts" name="TradeFactory &gt; should throw on invalid entryDate" time="0.000431916">
        </testcase>
        <testcase classname="src/domain/trade/entities/Trade.test.ts" name="TradeFactory &gt; should throw on invalid size" time="0.000464708">
        </testcase>
        <testcase classname="src/domain/trade/entities/Trade.test.ts" name="TradeFactory &gt; should throw on invalid price" time="0.000127875">
        </testcase>
    </testsuite>
    <testsuite name="src/domain/trade/valueObjects/EntryDate.test.ts" timestamp="2025-12-28T18:23:02.289Z" hostname="macbookair.home" tests="3" failures="0" errors="0" skipped="0" time="0.002346">
        <testcase classname="src/domain/trade/valueObjects/EntryDate.test.ts" name="EntryDate VO helpers &gt; toInputValue returns a datetime-local string parseable by Date" time="0.000904541">
        </testcase>
        <testcase classname="src/domain/trade/valueObjects/EntryDate.test.ts" name="EntryDate VO helpers &gt; toInputValue(iso) and fromInputValue roundtrip" time="0.000263875">
        </testcase>
        <testcase classname="src/domain/trade/valueObjects/EntryDate.test.ts" name="EntryDate VO helpers &gt; fromInputValue throws EntryDateInvalidError for invalid input" time="0.000198917">
        </testcase>
    </testsuite>
    <testsuite name="src/domain/trade/valueObjects/Leverage.test.ts" timestamp="2025-12-28T18:23:02.289Z" hostname="macbookair.home" tests="2" failures="0" errors="0" skipped="0" time="0.005515541">
        <testcase classname="src/domain/trade/valueObjects/Leverage.test.ts" name="Leverage VO &gt; accepts undefined and numeric values" time="0.001533334">
        </testcase>
        <testcase classname="src/domain/trade/valueObjects/Leverage.test.ts" name="Leverage VO &gt; throws on invalid numbers (&lt;=0 or NaN)" time="0.000614459">
        </testcase>
    </testsuite>
    <testsuite name="src/domain/trade/valueObjects/Margin.test.ts" timestamp="2025-12-28T18:23:02.289Z" hostname="macbookair.home" tests="3" failures="0" errors="0" skipped="0" time="0.001882334">
        <testcase classname="src/domain/trade/valueObjects/Margin.test.ts" name="Margin Value Object &gt; should create a Margin for positive values" time="0.0007315">
        </testcase>
        <testcase classname="src/domain/trade/valueObjects/Margin.test.ts" name="Margin Value Object &gt; should throw for zero or negative values" time="0.000216167">
        </testcase>
        <testcase classname="src/domain/trade/valueObjects/Margin.test.ts" name="Margin Value Object &gt; should throw for NaN or non-number" time="0.000112083">
        </testcase>
    </testsuite>
    <testsuite name="src/domain/trade/valueObjects/Market.test.ts" timestamp="2025-12-28T18:23:02.289Z" hostname="macbookair.home" tests="2" failures="0" errors="0" skipped="0" time="0.004401625">
        <testcase classname="src/domain/trade/valueObjects/Market.test.ts" name="Market VO &gt; normalizes forex and crypto" time="0.001841708">
        </testcase>
        <testcase classname="src/domain/trade/valueObjects/Market.test.ts" name="Market VO &gt; throws on invalid market" time="0.000934583">
        </testcase>
    </testsuite>
    <testsuite name="src/presentation/trade/TradeDetail/TradeDetailEditor.compact.test.tsx" timestamp="2025-12-28T18:23:02.289Z" hostname="macbookair.home" tests="1" failures="0" errors="0" skipped="0" time="0.067896458">
        <testcase classname="src/presentation/trade/TradeDetail/TradeDetailEditor.compact.test.tsx" name="TradeDetailEditor compact &gt; applies compact class and renders save button with saveBtn class" time="0.066393458">
        </testcase>
    </testsuite>
    <testsuite name="src/presentation/trade/TradeDetail/TradeDetailEditor.delete.test.tsx" timestamp="2025-12-28T18:23:02.290Z" hostname="macbookair.home" tests="1" failures="0" errors="0" skipped="0" time="0.074020167">
        <testcase classname="src/presentation/trade/TradeDetail/TradeDetailEditor.delete.test.tsx" name="TradeDetailEditor delete flow &gt; calls onDelete with the trade id when Delete clicked" time="0.072909375">
        </testcase>
    </testsuite>
    <testsuite name="src/presentation/trade/TradeDetail/TradeDetailEditor.test.tsx" timestamp="2025-12-28T18:23:02.290Z" hostname="macbookair.home" tests="1" failures="0" errors="0" skipped="0" time="0.071035584">
        <testcase classname="src/presentation/trade/TradeDetail/TradeDetailEditor.test.tsx" name="TradeDetailEditor &gt; calls onSave with updated trade when Save now clicked" time="0.069626625">
        </testcase>
    </testsuite>
    <testsuite name="src/presentation/trade/TradeList/TradeList.test.tsx" timestamp="2025-12-28T18:23:02.290Z" hostname="macbookair.home" tests="2" failures="0" errors="0" skipped="0" time="0.080560583">
        <testcase classname="src/presentation/trade/TradeList/TradeList.test.tsx" name="TradeList &gt; renders LONG and SHORT badges with normalized labels and classes" time="0.045197833">
        </testcase>
        <testcase classname="src/presentation/trade/TradeList/TradeList.test.tsx" name="TradeList &gt; renders PositionCard components in compactView" time="0.034135667">
        </testcase>
    </testsuite>
</testsuites>
